{
	"info": {
		"_postman_id": "ac1ff104-9f92-4c56-92f4-fac72a8huhuhu4d8543",
		"name": "My-OrderService-Automation",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "305916xx6"
	},
	"item": [
		{
			"name": "order-valid SAPP31",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", ()=> {\r",
							"    pm.response.to.have.status(200);\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const randomNumber = _.random(1000000,9999999);\r",
							"pm.variables.set(\"customer\", JSON.stringify({\r",
							"            \"number\":randomNumber,\r",
							"            \"name\":\"dr.curie\"\r",
							"         }));"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Ocp-Apim-Subscription-Key",
						"value": "{{Ocp-Apim-Subscription-Key}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"version\": \"1.0\",\r\n    \"erpSystem\": \"SAPP31\",\r\n    \"lensOrderDetails\": [\r\n        {\r\n            \"orderInfo\": {{orderInfo}},\r\n            \"customer\": {{customer}},\r\n            \"lensOptions\": {{lensOptions}},\r\n            \"lensPrescriptionData\": {{lensPrescriptionData}}\r\n        }\r\n    ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_URL}}/public/api/chub/slr/lens-order/batch",
					"host": [
						"{{base_URL}}"
					],
					"path": [
						"public",
						"api",
						"chub",
						"slr",
						"lens-order",
						"batch"
					]
				}
			},
			"response": []
		},
		{
			"name": "order-rejectionOrder-cancelled",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", ()=> {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"// check the db manually for the field is_cancelled = True"
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const randomNumber = _.random(1000000,9999999);\r",
							"pm.variables.set(\"customer\", JSON.stringify({\r",
							"            \"number\":randomNumber,\r",
							"            \"name\":\"dr.curie\"\r",
							"         }));\r",
							"\r",
							"const orderVariable = JSON.parse(pm.variables.get(\"orderInfo\"));\r",
							"orderVariable.rejectionReason = \"dummy\"\r",
							"orderJsonString = JSON.stringify(orderVariable);\r",
							"pm.variables.set(\"orderInfo\", orderJsonString);\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Ocp-Apim-Subscription-Key",
						"value": "{{Ocp-Apim-Subscription-Key}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"version\": \"1.0\",\r\n    \"erpSystem\": \"SAPP31\",\r\n    \"lensOrderDetails\": [\r\n        {\r\n            \"orderInfo\": {{orderInfo}},\r\n            \"customer\": {{customer}},\r\n            \"lensOptions\": {{lensOptions}},\r\n            \"lensPrescriptionData\": {{lensPrescriptionData}}\r\n        }\r\n    ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_URL}}/public/api/chub/slr/lens-order/batch",
					"host": [
						"{{base_URL}}"
					],
					"path": [
						"public",
						"api",
						"chub",
						"slr",
						"lens-order",
						"batch"
					]
				}
			},
			"response": []
		},
		{
			"name": "order- SAPP31 without globalOrderId",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							"\r",
							"const response = pm.response.text();\r",
							"\r",
							"pm.test(\"Response should have a proper error message\", function () {\r",
							"    pm.expect(response).to.eql(\"Missing or invalid payload provided at importing lens orders\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.variables.set(\"erpSystem\", \"SAPP31\");\r",
							"const randomNumber = _.random(1000000,9999999);\r",
							"pm.variables.set(\"customer\", JSON.stringify({\r",
							"            \"number\":randomNumber,\r",
							"            \"name\":\"dr.curie\"\r",
							"         }));\r",
							"pm.variables.set(\"orderInfo\",JSON.stringify({\r",
							"            \"sdNumber\":456789001230014,\r",
							"            \"creationDate\": \"10-11-2024\",\r",
							"            \"countryOfSales\":\"676Te\",\r",
							"            \"salesDocType\":\"hellouu\",\r",
							"            \"rejectionReason\":\"assigned\",\r",
							"            \"deliveryStatus\":\"open\"\r",
							"         }));"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Ocp-Apim-Subscription-Key",
						"value": "{{Ocp-Apim-Subscription-Key}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n   \"version\":\"1.0\",\r\n   \"erpSystem\":{{erpSystem}},\r\n   \"lensOrderDetails\":[\r\n    {\r\n        \"orderInfo\":{{orderInfo}},\r\n        \"customer\":{{customer}},\r\n        \"lensOptions\":{{lensOptions}},\r\n        \"lensPrescriptionData\":{{lensPrescriptionData}}\r\n    } \r\n   ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_URL}}/public/api/chub/slr/lens-order/batch",
					"host": [
						"{{base_URL}}"
					],
					"path": [
						"public",
						"api",
						"chub",
						"slr",
						"lens-order",
						"batch"
					]
				}
			},
			"response": []
		},
		{
			"name": "lens-order-sd number string validation",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							"\r",
							"pm.test(\"Response should have a proper error message\", function () {\r",
							"    const response = pm.response.text();\r",
							"    pm.expect(response).to.eql(\"Missing or invalid payload provided at importing lens orders\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const randomNumber = _.random(1000000,9999999);\r",
							"pm.variables.set(\"customer\",  JSON.stringify({\r",
							"            \"number\":randomNumber,\r",
							"            \"name\":\"dr.curie\"\r",
							"         }));\r",
							"         pm.variables.set(\"orderInfo\", JSON.stringify({\r",
							"            \"sdNumber\":\"dummy\",\r",
							"            \"creationDate\": \"10-11-2024\",\r",
							"            \"countryOfSales\":\"676Te\",\r",
							"            \"salesDocType\":\"hellouu\",\r",
							"            \"rejectionReason\":\"assigned\",\r",
							"            \"deliveryStatus\":\"open\"\r",
							"         }));\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Ocp-Apim-Subscription-Key",
						"value": "{{Ocp-Apim-Subscription-Key}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n   \"version\":\"1.0\",\r\n   \"erpSystem\":{{erpSystem}},\r\n   \"lensOrderDetails\":[\r\n    {\r\n        \"orderInfo\":{{orderInfo}},\r\n        \"customer\":{{customer}},\r\n        \"lensOptions\":{{lensOptions}},\r\n        \"lensPrescriptionData\":{{lensPrescriptionData}}\r\n    } \r\n   ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_URL}}/public/api/chub/slr/lens-order/batch",
					"host": [
						"{{base_URL}}"
					],
					"path": [
						"public",
						"api",
						"chub",
						"slr",
						"lens-order",
						"batch"
					]
				}
			},
			"response": []
		},
		{
			"name": "order-OrderInfo \"Creation Date\" format validation",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const randomNumber = _.random(1000000,9999999);\r",
							"pm.variables.set(\"customer\",  JSON.stringify({\r",
							"            \"number\":randomNumber,\r",
							"            \"name\":\"dr.curie\"\r",
							"         }));\r",
							"         pm.variables.set(\"orderInfo\", JSON.stringify({\r",
							"            \"sdNumber\":7867540987681,\r",
							"           \"creationDate\": \"10-11-2024\",\r",
							"            \"countryOfSales\":\"676Te\",\r",
							"            \"salesDocType\":\"hellouu\",\r",
							"            \"rejectionReason\":\"assigned\",\r",
							"            \"deliveryStatus\":\"open\"\r",
							"         }));\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Ocp-Apim-Subscription-Key",
						"value": "{{Ocp-Apim-Subscription-Key}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n   \"version\":\"1.0\",\r\n   \"erpSystem\":\"{{erpSystem}}\",\r\n   \"lensOrderDetails\":[\r\n    {\r\n        \"orderInfo\":{{orderInfo}},\r\n        \"customer\":{{customer}},\r\n        \"lensOptions\":{{lensOptions}},\r\n        \"lensPrescriptionData\":{{lensPrescriptionData}}\r\n    } \r\n   ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_URL}}/public/api/chub/slr/lens-order/batch",
					"host": [
						"{{base_URL}}"
					],
					"path": [
						"public",
						"api",
						"chub",
						"slr",
						"lens-order",
						"batch"
					]
				}
			},
			"response": []
		},
		{
			"name": "order-OrderInfo \"Creation Date\" - invalid",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 207\", function () {\r",
							"    pm.response.to.have.status(207);\r",
							"});\r",
							"\r",
							"pm.test(\"Response should have a proper error message\", function () {\r",
							"    const response = pm.response.json();\r",
							"    pm.expect(response.failures[0].errorMessages[0]).to.eql(\"The field CreationDate must be in dd-MM-yyyy format.\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const randomNumber = _.random(1000000,9999999);\r",
							"pm.variables.set(\"customer\", JSON.stringify({\r",
							"            \"number\":randomNumber,\r",
							"            \"name\":\"dr.curie\"\r",
							"         }));\r",
							"pm.variables.set(\"orderInfo\", JSON.stringify({\r",
							"    \"sdNumber\":7867540987681,\r",
							"    \"creationDate\": \"190luvgfrdv-78-2024\",\r",
							"    \"countryOfSales\":\"676Te\",\r",
							"    \"salesDocType\":\"hellouu\",\r",
							"    \"rejectionReason\":\"assigned\",\r",
							"    \"deliveryStatus\":\"open\"\r",
							"}));\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Ocp-Apim-Subscription-Key",
						"value": "{{Ocp-Apim-Subscription-Key}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n   \"version\":\"1.0\",\r\n   \"erpSystem\":\"{{erpSystem}}\",\r\n   \"lensOrderDetails\":[\r\n    {\r\n        \"orderInfo\":{{orderInfo}},\r\n        \"customer\":{{customer}},\r\n        \"lensOptions\":{{lensOptions}},\r\n        \"lensPrescriptionData\":{{lensPrescriptionData}}\r\n    } \r\n   ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_URL}}/public/api/chub/slr/lens-order/batch",
					"host": [
						"{{base_URL}}"
					],
					"path": [
						"public",
						"api",
						"chub",
						"slr",
						"lens-order",
						"batch"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					"pm.variables.unset(\"erpSystem\")\r",
					"pm.variables.unset(\"orderInfo\")\r",
					"pm.variables.unset(\"customer\")"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_URL",
			"value": "https://api-vision-dev-d7g3dge6gse5cba0.a03.azurefd.net",
			"type": "string"
		},
		{
			"key": "erpSystem",
			"value": "AS400",
			"type": "string"
		},
		{
			"key": "Ocp-Apim-Subscription-Key",
			"value": "999476f4be6a429aa2xxxxxxxxxxxxxxxxx89d",
			"type": "string"
		},
		{
			"key": "orderInfo",
			"value": "{\n            \"sdNumber\":456789001230014,\n            \"creationDate\":\"10-11-2024\",\n            \"globalOrderIdP0\":213400113,\n            \"countryOfSales\":\"DE\",\n            \"salesDocType\":\"hellouu\",\n            \"rejectionReason\":\"Not assigned\",\n            \"deliveryStatus\":\"open\"\n         }",
			"type": "string"
		},
		{
			"key": "customer",
			"value": "{\n            \"number\":600120903212199021,\n            \"name\":\"dr.curie\"\n         }",
			"type": "string"
		},
		{
			"key": "lensEdiCode",
			"value": "231370",
			"type": "string"
		},
		{
			"key": "lensMetaDate",
			"value": "{\n            \"name\":\"ZEISS Progressive SmartLife Superb 1.6\",\n            \"productLine\":\"SmartLifetest\",\n            \"technicalMaterial\":\"Organic 1.67 BlueGuard\",\n            \"focalType\":\"Progressive\",\n            \"lensTechnicalDesign\":\"PRG Madonna Easy\",\n            \"materialGroup\":\"Organic\",\n            \"index\":343.786899\n         }",
			"type": "string"
		},
		{
			"key": "lensOptions",
			"value": "{\n            \"colorCode\":7,\n            \"colorDescription\":\"Red\",\n            \"coatingCode\":\"HM\",\n            \"coatingDescription\":\"Duravision\"\n         }",
			"type": "string"
		},
		{
			"key": "lensPrescriptionData",
			"value": "{\n            \"leftLens\":{\n               \"lensMetadata\":{\n                  \"lensEdiCode\":23134,\n                  \"name\":\"ZEISS Progressive SmartLife Superb 1.6\",\n                  \"productLine\":\"SmartLifetest\",\n                  \"materialVariant\":\"Organic 1.67 BlueGuard\",\n                  \"focalType\":\"Progressive\",\n                  \"lensTechnicalDesign\":\"PRG Madonna Easy\",\n                  \"materialGroup\":\"Organic\",\n                  \"index\":343.786899,\n                  \"diameter\":70\n               },\n               \"refractionData\":{\n                  \"sphere\":19.50,\n                  \"cylinder\":0.75,\n                  \"axis\":124,\n                  \"addition\":10.25,\n                  \"resPrism\":12.435,\n                  \"resBase\":9.223\n               },\n               \"centrationData\":{\n                  \"monocularPd\":76.09\n               },\n               \"frameData\":{\n                  \"length\":61.0,\n                  \"width\":13.90\n               },\n               \"additionalTechnicalData\":{\n                  \"nearType\":\"I\"\n               }\n            },\n            \"rightLens\":{\n               \"lensMetadata\":{\n                  \"lensEdiCode\":46407,\n                  \"name\":\"ZEISS Progressive SmartLife Superb 1.6\",\n                  \"productLine\":\"SmartLife\",\n                  \"materialVariant\":\"BlueGuard\",\n                  \"focalType\":\"Progressive\",\n                  \"lensTechnicalDesign\":\"PRG Madonna Easy\",\n                  \"materialGroup\":\"Organic\",\n                  \"index\":1.67,\n                  \"diameter\":70\n               },\n               \"refractionData\":{\n                  \"sphere\":-1.25,\n                  \"cylinder\":0.50,\n                  \"axis\":60,\n                  \"addition\":1.50,\n                  \"resPrism\":12.435,\n                  \"resBase\":9.223\n               },\n               \"centrationData\":{\n                  \"monocularPd\":76.09\n               },\n               \"frameData\":{\n                  \"length\":61.0,\n                  \"width\":13.90\n               },\n               \"additionalTechnicalData\":{\n                  \"nearType\":\"I\"\n               }\n            }\n         }",
			"type": "string"
		}
	]
}
